{
  "hash": "2944195724106890caec98447552fdf4",
  "result": {
    "engine": "knitr",
    "markdown": "## Simpson's paradox\n\n::: {#exm-simpson}\n(Simpson's paradox). There are two doctors, Dr. Lee and Dr. Wong,\nperforming two types of surgeries --- heart surgery (hard) and band-aid\nremoval (easy). Dr. Lee has higher overall surgery success rate. Is Dr.\nLee necessarily a better doctor than Dr. Wong?\n\nNo. Consider the following example:\n\n|              |         |          |       |     |          |          |       |\n|--------------|:-------:|----------|-------|-----|:--------:|----------|-------|\n|              | Dr. Lee |          |       |     | Dr. Wong |          |       |\n|              |  Heart  | Band-Aid | Total |     |  Heart   | Band-Aid | Total |\n| Success      |    2    | 81       | 83    |     |    70    | 10       | 80    |\n| Failure      |    8    | 9        | 17    |     |    20    | 0        | 20    |\n| Success rate |   20%   | 90%      | 83%   |     |   78%    | 100%     | 80%   |\n\nThe truth is Dr. Lee has overall higher success rate because he only\ndoes easy surgeries (band-aid removal). Dr. Wong does mostly hard\nsurgeries and thus has a lower overall success rate. Yet, he is better\nat each single type of surgery. To formalize the argument, let $S$:\nsuccessful surgery; $D$: treated by Dr. Lee, $D^{c}$: treated by Dr.\nWong; $E$: heart surgery, $E^{c}$: band-aid removal. Dr. Wong is better\nat each type of surgery, $$\\begin{aligned}P(S|D,E) & <P(S|D^{c},E)\\\\\nP(S|D,E^{c}) & <P(S|D^{c},E^{c});\n\\end{aligned}$$ But, Dr. Lee has a higher overall successful rate,\n$$P(S|D)>P(S|D^{c}).$$ This is because there is a \"confounder\" $E$:\n$$P(S|D)=\\underbrace{P(S|D,E)}_{<P(S|D^{c},E)}\\underbrace{P(E|D)}_{\\textrm{weight}}+\\underbrace{P(S|D,E^{c})}_{<P(S|D^{c},E^{c})}\\underbrace{P(E^{c}|D)}_{\\textrm{weight}}.$$\n:::\n\nA **confounder** is a variable that influences with both explanatory\nvariable and the outcome variable, which therefore \"confounds\" the\ncorrelation between the two. In our example, the type of surgery ($E$)\nis associated with both the doctor and the outcome. Without the\nconfounder being controlled, it is impossible to draw valid conclusions\nfrom the statistics.\n\nIn general terms, Simpson's paradox refers to the paradox in which a\ntrend that appears across different groups of aggregate data is the\nreverse of the trend that appears when the aggregate data is broken up\ninto its components. It is one of the most common sources of statistical\nmisuse. Here is another example.\n\n::: {#exm-ucbgender}\n(UC Berkeley gender bias). One of the best-known examples of Simpson's\nparadox comes from a study of gender bias among graduate school\nadmissions to University of California, Berkeley. The admission figures\nfor the fall of 1973 showed that men applying were more likely than\nwomen to be admitted, and the difference was so large that it was\nunlikely to be due to chance.\n\n|       |            |          |     |            |          |\n|-------|:----------:|----------|-----|:----------:|----------|\n|       |    Male    |          |     |   Female   |          |\n|       | Applicants | Admitted |     | Applicants | Admitted |\n| Total |   8,442    | 44%      |     |   4,321    | 35%      |\n\nHowever, when taking into account the information about departments\nbeing applied to, the conclusion turns to the opposite: in most\ndepartments, the admission rate for women is higher than men. The lower\noverall admission rate is caused by the fact that women tended to apply\nto more competitive departments with lower rates of admission, whereas\nmen tended to apply to less competitive departments with higher rates of\nadmission.\n\n|            |            |          |            |          |\n|:----------:|:----------:|----------|:----------:|----------|\n| Department |    Male    |          |   Female   |          |\n|            | Applicants | Admitted | Applicants | Admitted |\n|     A      |    825     | 62%      |    108     | 82%      |\n|     B      |    560     | 63%      |     25     | 68%      |\n|     C      |    325     | 37%      |    593     | 34%      |\n|     D      |    417     | 33%      |    375     | 35%      |\n|     E      |    191     | 28%      |    393     | 24%      |\n|     F      |    373     | 6%       |    341     | 7%       |\n|   Total    |    2691    | 45%      |    1835    | 30%      |\n:::\n\nSee <https://setosa.io/simpsons> for a really good\n    illustration of the Simpson's paradox.\n    \n## R demostration {.unnumbered}\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# R has a built-in dataset `UCBAdmissions`\n# we convert it to data frame for analysis\ndata <- as.data.frame(UCBAdmissions)\n\n# browse the first a few rows\nhead(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     Admit Gender Dept Freq\n1 Admitted   Male    A  512\n2 Rejected   Male    A  313\n3 Admitted Female    A   89\n4 Rejected Female    A   19\n5 Admitted   Male    B  353\n6 Rejected   Male    B  207\n```\n\n\n:::\n\n```{.r .cell-code}\n# subset of the data with only admissions\ndata <- subset(data, Admit == 'Admitted')\n\n# number of admissions by Gender\naggregate(Freq ~ Gender, data = data, FUN = sum)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Gender Freq\n1   Male 1198\n2 Female  557\n```\n\n\n:::\n\n```{.r .cell-code}\n# number of admissions by Gender and Department\naggregate(Freq ~ Gender + Dept, data = data, FUN = sum)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Gender Dept Freq\n1    Male    A  512\n2  Female    A   89\n3    Male    B  353\n4  Female    B   17\n5    Male    C  120\n6  Female    C  202\n7    Male    D  138\n8  Female    D  131\n9    Male    E   53\n10 Female    E   94\n11   Male    F   22\n12 Female    F   24\n```\n\n\n:::\n:::\n\n\n::: callout-note\n### The importance of conditional thinking\nWhenever we talk about probability or statistics, always remind ourselves \nwhat we are the conditioning on. Any statistical reasoning without specifying \nthe conditions can be misleading. We are prone to such fallacies everyday everywhere. \n\n- \"10 millions new jobs were added during the term of President X.\" But it doesn't \ntell you this was achieved conditioned on that the economy had just had the worst\nrecession. \n- \"Private schools' graduates earned 50% more than those graduated from \npublic schools.\" But it doesn't tell you the background of those students who\nenrolled in private schools.\n\nBe vigilant to these claims when you see them next time.\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}