## Two envelope paradox*

::: {#exm-two-envelope}
### Two-envelope paradox

Imagine you are given two identical envelopes, each containing money.
One contains twice as much as the other. You may pick one envelope and
keep the money it contains. Having chosen an envelope at will, but
before inspecting it, you are given the chance to switch envelopes.
Should you switch?
:::

The paradox arises when you try to solve the expectation. Let $A$ denote
the amount of money in the envelope you have chosen, and $B$ denote the
amount of money in the other envelope.

We know $B$ is either twice as much as $A$, or half as much as $A$. Each
with probability $1/2$. So

$$E(B) = \frac{1}{2}(2A) + \frac{1}{2}(A/2) = \frac{5}{4}A$$

Since $E(B)>A$, you should always switch! However, after you switch to
$B$, by the same argument, you should switch back to $A$. You you switch
back and forth indefinitely!

**Where do things go wrong?** The error in this calculation lies in a
subtle misunderstanding: the two $A$s in the calculation actually
represent different values, that are incorrectly equated. In particular,
the $2A$ represents the expected value in the other envelope given that
it is the larger one, and the $A/2$ represents the expected value in the
other envelope given that it is the smaller one.

$$E(B) = E(B|B<A)P(B<A) + E(B|B>A)P(B>A)$$

Suppose the amount of money in the two envelopes are $a$ and $2a$
respectively. $E(B|B<A)=a$ and $E(B|B>A)=2a$. Therefore,

$$E(B)=\frac{1}{2}a + \frac{1}{2}2a = \frac{3}{2}a.$$

The same calculation applies to $E(A)$. Thus, $E(A)=E(B)$.
